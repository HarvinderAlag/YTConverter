<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free YouTube to MP3 and MP4 converter. Download your favorite YouTube videos in high quality audio and video formats.">
    <title>YouTube to MP3/MP4 Converter | Fast, Free & Secure</title>
    <style>
        :root {
            --primary: #ff4757;
            --secondary: #5352ed;
            --dark: #2f3542;
            --light: #f1f2f6;
            --success: #2ed573;
            --warning: #ffa502;
            --error: #ff4757;
            --gray: #747d8c;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
        }
        
        .logo {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: inline-block;
        }
        
        .tagline {
            font-size: 1.2rem;
            color: var(--light);
            opacity: 0.8;
        }
        
        .converter-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
        }
        
        .input-group {
            display: flex;
            margin-bottom: 20px;
        }
        
        #video-url {
            flex: 1;
            padding: 15px 20px;
            border: none;
            border-radius: 8px 0 0 8px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
            font-size: 16px;
        }
        
        #video-url::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        #fetch-btn {
            padding: 15px 25px;
            border: none;
            border-radius: 0 8px 8px 0;
            background: var(--primary);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        #fetch-btn:hover {
            background: #ff3742;
        }
        
        .format-options {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .format-option {
            flex: 1;
            min-width: 120px;
        }
        
        .format-option input[type="radio"] {
            display: none;
        }
        
        .format-option label {
            display: block;
            padding: 15px;
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .format-option input[type="radio"]:checked + label {
            background: var(--secondary);
            font-weight: 600;
        }
        
        .result-container {
            display: none;
            margin-top: 30px;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .video-info {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            align-items: center;
        }
        
        .thumbnail {
            width: 160px;
            height: 90px;
            border-radius: 8px;
            object-fit: cover;
        }
        
        .video-details {
            flex: 1;
        }
        
        .video-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .video-meta {
            color: var(--gray);
            font-size: 14px;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn-download {
            background: var(--success);
            color: white;
            flex: 2;
        }
        
        .btn-next {
            background: var(--secondary);
            color: white;
            flex: 1;
        }
        
        .btn i {
            margin-right: 8px;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 30px;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top: 5px solid var(--primary);
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error-message {
            display: none;
            background: rgba(255, 71, 87, 0.2);
            border-left: 4px solid var(--error);
            padding: 15px;
            border-radius: 4px;
            margin-top: 20px;
        }
        
        .ad-container {
            width: 100%;
            margin: 30px 0;
            text-align: center;
            min-height: 90px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            color: var(--gray);
        }
        
        .disclaimer {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 8px;
            font-size: 12px;
            line-height: 1.6;
            color: var(--gray);
            margin-top: 40px;
        }
        
        .disclaimer h3 {
            color: var(--warning);
            margin-bottom: 10px;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: var(--gray);
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .input-group {
                flex-direction: column;
            }
            
            #video-url {
                border-radius: 8px;
                margin-bottom: 10px;
            }
            
            #fetch-btn {
                border-radius: 8px;
            }
            
            .video-info {
                flex-direction: column;
                text-align: center;
            }
            
            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">YTConverter</div>
            <p class="tagline">Convert YouTube videos to MP3 and MP4 formats instantly</p>
        </header>
        
        <div class="ad-container">
            <!-- Google AdSense Ad Unit -->
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-your-ad-client-id" crossorigin="anonymous"></script>
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-your-ad-client-id"
                 data-ad-slot="your-ad-slot-id"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
        
        <div class="converter-card">
            <div class="input-group">
                <input type="text" id="video-url" placeholder="Paste YouTube URL here...">
                <button id="fetch-btn">Fetch Video</button>
            </div>
            
            <div class="format-options">
                <div class="format-option">
                    <input type="radio" id="format-mp3" name="format" value="mp3" checked>
                    <label for="format-mp3">MP3 (Audio)</label>
                </div>
                <div class="format-option">
                    <input type="radio" id="format-mp4" name="format" value="mp4">
                    <label for="format-mp4">MP4 (Video)</label>
                </div>
                <div class="format-option">
                    <input type="radio" id="format-high" name="format" value="high">
                    <label for="format-high">High Quality</label>
                </div>
                <div class="format-option">
                    <input type="radio" id="format-low" name="format" value="low">
                    <label for="format-low">Low Quality</label>
                </div>
            </div>
            
            <div class="loading">
                <div class="spinner"></div>
                <p>Processing your request...</p>
            </div>
            
            <div class="error-message" id="error-message"></div>
            
            <div class="result-container" id="result-container">
                <div class="video-info">
                    <img src="" alt="Video thumbnail" class="thumbnail" id="video-thumbnail">
                    <div class="video-details">
                        <h3 class="video-title" id="video-title">Video Title</h3>
                        <p class="video-meta" id="video-duration">Duration: 00:00</p>
                        <p class="video-meta" id="video-views">Views: 0</p>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn btn-download" id="download-btn">
                        <i class="fas fa-download"></i> Download
                    </button>
                    <button class="btn btn-next" id="next-btn">
                        <i class="fas fa-forward"></i> Next
                    </button>
                </div>
            </div>
        </div>
        
        <div class="ad-container">
            <!-- Google AdSense Ad Unit -->
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-your-ad-client-id" crossorigin="anonymous"></script>
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-your-ad-client-id"
                 data-ad-slot="your-ad-slot-id"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
        
        <div class="disclaimer">
            <h3>Disclaimer</h3>
            <p>This tool is provided for educational and personal use only. Users are solely responsible for ensuring they have the right to download and convert any video content. We do not host or store any videos on our servers. The conversion process happens in real-time.</p>
            <p>We are not responsible for any copyright infringement that may occur through the use of this service. Users are advised to respect copyright laws and only download content that is in the public domain, content they have created themselves, or content for which they have obtained permission from the copyright holder.</p>
            <p>By using this service, you agree to these terms and accept full responsibility for any legal consequences that may arise from your use of converted content.</p>
        </div>
        
        <footer>
            <p>© 2023 YTConverter. All rights reserved. | Privacy Policy | Terms of Service</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const videoUrlInput = document.getElementById('video-url');
            const fetchBtn = document.getElementById('fetch-btn');
            const formatOptions = document.querySelectorAll('input[name="format"]');
            const resultContainer = document.getElementById('result-container');
            const videoThumbnail = document.getElementById('video-thumbnail');
            const videoTitle = document.getElementById('video-title');
            const videoDuration = document.getElementById('video-duration');
            const videoViews = document.getElementById('video-views');
            const downloadBtn = document.getElementById('download-btn');
            const nextBtn = document.getElementById('next-btn');
            const loading = document.querySelector('.loading');
            const errorMessage = document.getElementById('error-message');
            
            let currentVideoId = null;
            let currentFormat = 'mp3';
            
            // Update current format when user selects a different option
            formatOptions.forEach(option => {
                option.addEventListener('change', function() {
                    currentFormat = this.value;
                });
            });
            
            // Fetch video info when user clicks the button
            fetchBtn.addEventListener('click', function() {
                const videoUrl = videoUrlInput.value.trim();
                
                if (!isValidYouTubeUrl(videoUrl)) {
                    showError('Please enter a valid YouTube URL');
                    return;
                }
                
                // Extract video ID from URL
                const videoId = extractVideoId(videoUrl);
                if (!videoId) {
                    showError('Could not extract video ID from the URL');
                    return;
                }
                
                currentVideoId = videoId;
                fetchVideoInfo(videoId);
            });
            
            // Download button click handler
            downloadBtn.addEventListener('click', function() {
                if (!currentVideoId) return;
                
                startConversion(currentVideoId, currentFormat);
            });
            
            // Next button click handler
            nextBtn.addEventListener('click', function() {
                resetUI();
            });
            
            // Validate YouTube URL
            function isValidYouTubeUrl(url) {
                const pattern = /^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.?be)\/.+$/;
                return pattern.test(url);
            }
            
            // Extract video ID from URL
            function extractVideoId(url) {
                const regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;
                const match = url.match(regExp);
                return (match && match[7].length === 11) ? match[7] : null;
            }
            
            // Fetch video information from backend
            function fetchVideoInfo(videoId) {
                showLoading();
                hideError();
                
                // In a real implementation, this would call your Python backend
                // For demonstration, we're using a simulated response
                simulateApiCall(`/api/video-info/${videoId}`)
                    .then(data => {
                        hideLoading();
                        displayVideoInfo(data);
                    })
                    .catch(error => {
                        hideLoading();
                        showError('Failed to fetch video information: ' + error.message);
                    });
            }
            
            // Start conversion process
            function startConversion(videoId, format) {
                showLoading();
                hideError();
                
                // In a real implementation, this would call your Python backend
                simulateApiCall(`/api/convert/${videoId}?format=${format}`, {method: 'POST'})
                    .then(data => {
                        hideLoading();
                        
                        if (data.success) {
                            // In a real implementation, this would trigger the download
                            alert(`Conversion complete! Download would start now for ${data.filename}`);
                            // Actual implementation would be: window.location.href = data.downloadUrl;
                        } else {
                            showError('Conversion failed: ' + data.message);
                        }
                    })
                    .catch(error => {
                        hideLoading();
                        showError('Conversion failed: ' + error.message);
                    });
            }
            
            // Display video information in the UI
            function displayVideoInfo(data) {
                videoThumbnail.src = data.thumbnail;
                videoTitle.textContent = data.title;
                videoDuration.textContent = `Duration: ${formatDuration(data.duration)}`;
                videoViews.textContent = `Views: ${formatViews(data.views)}`;
                
                resultContainer.style.display = 'block';
            }
            
            // Format duration from seconds to HH:MM:SS
            function formatDuration(seconds) {
                const h = Math.floor(seconds / 3600);
                const m = Math.floor(seconds % 3600 / 60);
                const s = Math.floor(seconds % 3600 % 60);
                
                return [
                    h > 0 ? h : null,
                    h > 0 ? m.toString().padStart(2, '0') : m,
                    s.toString().padStart(2, '0')
                ].filter(Boolean).join(':');
            }
            
            // Format views count
            function formatViews(views) {
                if (views >= 1000000) {
                    return (views / 1000000).toFixed(1) + 'M';
                } else if (views >= 1000) {
                    return (views / 1000).toFixed(1) + 'K';
                }
                return views;
            }
            
            // Show loading state
            function showLoading() {
                loading.style.display = 'block';
            }
            
            // Hide loading state
            function hideLoading() {
                loading.style.display = 'none';
            }
            
            // Show error message
            function showError(message) {
                errorMessage.textContent = message;
                errorMessage.style.display = 'block';
            }
            
            // Hide error message
            function hideError() {
                errorMessage.style.display = 'none';
            }
            
            // Reset UI to initial state
            function resetUI() {
                videoUrlInput.value = '';
                resultContainer.style.display = 'none';
                hideError();
            }
            
            // Simulate API call (to be replaced with actual fetch to your Python backend)
            function simulateApiCall(url, options = {}) {
                return new Promise((resolve, reject) => {
                    // Simulate network delay
                    setTimeout(() => {
                        // Simulate occasional failure
                        if (Math.random() < 0.1) {
                            reject(new Error('Network error'));
                            return;
                        }
                        
                        // Simulate responses for different endpoints
                        if (url.includes('/api/video-info/')) {
                            const videoId = url.split('/').pop();
                            resolve({
                                title: 'Sample YouTube Video',
                                duration: 367, // 6 minutes 7 seconds
                                views: 15423698,
                                thumbnail: `https://i.ytimg.com/vi/${videoId}/mqdefault.jpg`
                            });
                        } else if (url.includes('/api/convert/')) {
                            const format = new URLSearchParams(url.split('?')[1]).get('format');
                            resolve({
                                success: true,
                                message: 'Conversion successful',
                                filename: `converted_video.${format}`
                            });
                        } else {
                            reject(new Error('Unknown API endpoint'));
                        }
                    }, 1500);
                });
            }
        });
    </script>

    <!-- Font Awesome for icons -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</body>
</html>
